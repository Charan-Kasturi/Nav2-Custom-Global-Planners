README.md
# Nav2 Custom Global Planners (A* & Hybrid A*)

This repository provides custom global planner plugins for Nav2 implemented for ROS 2:

- A* (grid-based planner)
- Hybrid A* (kinematically-feasible planner with heading)

The planners are integrated with Nav2 and demonstrated using TurtleBot3 in Gazebo, custom Behavior Trees, and a bringup package.

## System Overview

- Robot: TurtleBot3 (Burger)
- Simulator: Gazebo
- Localization: AMCL
- Global planner: Custom Hybrid A*
- Local planner: DWB
- Behavior trees: custom BT used for planner-driven replanning

## Repository structure

```
README.md
maps
  my_map.pgm
  my_map.yaml
videos
  a_star_hybrid.webm
  a_star.webm
src
  my_nav2_a_star_hybrid_planner
  my_nav2_a_star_planner
  my_nav2_bringup
  turtlebot3
  turtlebot3_simulations
```
- Nav2
- TurtleBot3 packages
- Gazebo

Ensure TurtleBot3 simulation works before running this repository.

## Build and Install

1. Clone the repository into a workspace:

```bash
mkdir -p ~/nav2_custom_planners/src
cd ~/nav2_custom_planners/src
git clone https://github.com/Charan-Kasturi/Nav2-Custom-Global-Planners.git
```

2. Install dependencies:

```bash
cd ~/nav2_custom_planners
source /opt/ros/humble/setup.bash
rosdep update
rosdep install --from-paths src --ignore-src -r -y
```

3. Build the workspace:

```bash
colcon build --symlink-install
```

## Run (example)

Use three separate terminals. In each terminal run:

```bash
source /opt/ros/humble/setup.bash
source ~/nav2_custom_planners/install/setup.bash
export TURTLEBOT3_MODEL=burger
```

Terminal 1 — launch TurtleBot3 Gazebo:

```bash
ros2 launch turtlebot3_gazebo turtlebot3_world.launch.py
```

Terminal 2 — launch Nav2 with custom planners:

```bash
ros2 launch my_nav2_bringup bringup_launch.py \
  use_sim_time:=true \
  map:=/home/<your_user>/nav2_custom_planners/maps/my_map.yaml \
  params_file:=/home/<your_user>/nav2_custom_planners/src/my_nav2_bringup/params/nav2_params.yaml
```

Terminal 3 — launch RViz:

```bash
ros2 launch my_nav2_bringup rviz_launch.py \
  rviz_config:=/home/<your_user>/nav2_custom_planners/src/my_nav2_bringup/configs/basic_config.rviz
```

## How to test navigation

1. In RViz, click "2D Pose Estimate" and set the robot's initial pose on the map.
2. Click "2D Nav Goal" and select a goal position.
3. Observe the global path generated by the custom planner and the robot following the path in Gazebo.

Replanning is performed at 1 Hz via the custom behavior tree.

## Planner configuration (example)

Example `planner_server` entry from `nav2_params.yaml`:

```yaml
planner_server:
  ros__parameters:
    planner_plugins: ["a_star_hybrid"]

    a_star_hybrid:
      plugin: "my_nav2_a_star_hybrid_planner/a_star_hybrid_planner"
      lethal_cost: 253
      step_size: 3
      num_steps: 10
      each_step_cost: 1.0
      min_turn_radius_cells: 15.0
      goal_vicinity_cells: 1
      theta_bins: 72
```

The behavior tree used for planner-only replanning is located at:

`my_nav2_bringup/behavior_trees/a_star_only.xml`

Key features:

- Replans at 1 Hz
- Uses `ComputePathToPose` with `planner_id="a_star_hybrid"`
- Includes recovery actions: costmap clearing, spin, backup, and wait

## Videos

- A* demo: [videos/a_star.webm](videos/a_star.webm)
- Hybrid A* demo: [videos/a_star_hybrid.webm](videos/a_star_hybrid.webm)

## Notes and limitations

- Currently some configuration files use absolute paths (map, params, behavior tree XML). This is intentional for reproducibility.

- More custom planners will be added to this repository soon; check back for updates in this section and the `videos/` folder.

- Future work: convert to package-share paths for portability.
